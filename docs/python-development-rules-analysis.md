# Анализ правил разработки на Python

Данный документ содержит анализ существующих правил для разработки на Python, собранных в директории `cursor/python/rules`.

## Основные правила и их назначение

1. **python-development-guide.mdc** - Сводное руководство по разработке, содержащее ключевые принципы и ссылки на подробные правила.
2. **python-code-style.mdc** - Правила стиля кода, обеспечивающие читаемость и единообразие кодовой базы.
3. **python-documentation.mdc** - Правила документирования кода, включая докстринги и комментарии.
4. **python-error-handling.mdc** - Правила обработки ошибок и исключений для обеспечения надежности приложения.
5. **python-logging.mdc** - Правила организации логирования для отслеживания работы приложения.
6. **python-architecture.mdc** - Правила архитектуры и организации кода для обеспечения модульности и повторного использования.
7. **python-project-layout.mdc** - Правила структуры проекта, включающие разделение исходного кода, тестов и документации.
8. **python-testing.mdc** - Правила разработки и управления юнит-тестами, основанные на принципах TDD.
9. **using-uv.mdc** - Правила управления зависимостями с помощью инструмента `uv`.
10. **vscode-python-config.mdc** - Правила настройки VSCode для эффективной работы с Python проектами.

## Ключевые аспекты разработки

### 1. Стиль кода

- **Базовые стандарты**: Строгое соблюдение PEP 8 и PEP 257
- **Типизация**: Обязательное использование аннотаций типов для всех функций и методов
- **Именование**: snake_case для функций и переменных, PascalCase для классов, UPPER_CASE для констант
- **Организация кода**: Структурированные импорты, логическое разделение функций и классов
- **Константы и перечисления**: Запрет строковых литералов, использование Enum
- **Форматирование**: Использование black с длиной строки 88 символов

### 2. Документация

- **Язык**: Строго на английском языке
- **Докстринги**: Обязательные для всех модулей, классов и функций в формате Google
- **Комментарии**: Только для пояснения неочевидного поведения, на английском языке
- **Проектная документация**: README.md и структурированная документация в директории /docs

### 3. Архитектура

- **Модульность**: Разделение кода на логические модули с четкими границами
- **Принципы SOLID**: Единственная ответственность, открытость/закрытость, инверсия зависимостей
- **Слоистая архитектура**: Четкое разделение слоев с направленными зависимостями
- **ORM и базы данных**: Использование паттерна "Репозиторий" для абстрагирования доступа к данным

### 4. Тестирование

- **Подход**: Test-Driven Development (TDD) с циклом Red-Green-Refactor
- **Инструмент**: pytest с использованием фикстур и параметризации
- **Организация**: Тесты в отдельной директории, зеркально отражающей структуру основного кода
- **Покрытие**: Стремление к покрытию не менее 80%

### 5. Обработка ошибок

- **Типы исключений**: Использование стандартных исключений Python, минимум пользовательских исключений
- **Иерархия исключений**: Создание логической иерархии для сложных приложений
- **Информативные сообщения**: Подробные сообщения об ошибках, содержащие контекст
- **Обработка**: Перехват конкретных исключений на соответствующем уровне абстракции

### 6. Логирование

- **Единообразие**: Консистентное использование логирования во всем проекте
- **Уровни**: Использование соответствующих уровней для разных типов сообщений (DEBUG, INFO, WARNING, ERROR, CRITICAL)
- **Контекст**: Включение контекстной информации в логи для упрощения отладки
- **Структурированность**: Единый формат логов для упрощения анализа

### 7. Структура проекта

- **Основная структура**: src/project_name для исходного кода, tests/ для тестов, docs/ для документации
- **Абсолютные импорты**: Использование абсолютных импортов для предотвращения конфликтов
- **Логическая организация**: Разделение функциональности на подпакеты (core/, services/, и т.д.)

### 8. Управление зависимостями

- **Инструмент**: uv для управления зависимостями и выполнения задач разработки
- **Фиксация версий**: Использование файла блокировки для воспроизводимости сборок
- **Разделение зависимостей**: Четкое разделение основных и dev-зависимостей
- **Минимизация**: Стремление к минимальному количеству зависимостей

### 9. Настройка IDE

- **Интерпретатор**: Использование виртуального окружения проекта
- **Пути**: Настройка путей для корректной работы с импортами из директории src/
- **Тестирование**: Интеграция с системой тестирования в директории tests/
- **Отладка**: Настройка отладчика для эффективной работы с проектом

## Существующие проблемы и недостатки

1. **Отсутствие первичного правила**: Нет файла с именем 1-python-rules-guide.mdc, который должен быть основным согласно стандартам Cursor Rules.
2. **Язык документации**: Все правила написаны на русском языке, что противоречит требованию использовать строго английский язык (пункт 8 в @4-cursor-rules-format.mdc).
3. **Структура frontmatter**: В некоторых файлах используется поле `related`, что не рекомендовано в @4-cursor-rules-format.mdc пункт 9.4.
4. **Несоответствие нумерации**: Файлы не имеют числовых префиксов, что не соответствует требованиям @3-cursor-rules-structure.mdc пункт 2.

## Рекомендации по улучшению

1. Создать первичный файл `1-python-rules-guide.mdc` в соответствии с требованиями Cursor Rules.
2. Перевести все правила на английский язык.
3. Удалить поле `related` из frontmatter всех файлов.
4. Добавить числовые префиксы к именам файлов (например, `1-python-rules-guide.mdc`, `2-python-code-style.mdc` и т.д.).
5. Обеспечить полное соответствие всех правил требованиям Cursor Rules.
